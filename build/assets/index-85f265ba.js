import{az as De,r as l,n as x,y as w,o as h,N as Se,dP as ke,P as Y,q as s,z as b,a4 as Te,a8 as J,v as Ve,a9 as Me,aa as Be,J as Re,dQ as Pe,R as W,dR as X,ab as K,dS as Ae,dT as Ue,h as v,Q as $,ad as M,an as Ee,ao as $e,ap as Ge,dU as ee,dV as k,Z as S,dW as P,dX as B,dY as A,dZ as F,d_ as Le,ae as U,ac as Fe,F as O,d$ as te,af as ae,T as G,al as Oe,e0 as Ye,e1 as Ie,B as D,aD as We,M as z,aq as je,ar as He,as as Ke,cU as ze,e2 as se,au as qe,e3 as _e,am as Ze,e4 as Qe,b1 as Je,e5 as Xe}from"./index-fc282d72.js";import{S as et,a as tt,b as at,c as st,d as q,P as ot}from"./PieChart-1ef5f840.js";import{S as j,V as T,o as oe,n as ne,p as nt,r as lt,u as rt}from"./VaultYearlyStat-f5a48854.js";import{S as it,C as ct,I as dt}from"./Search-d97f540f.js";import{B as E,T as le}from"./BasicTooltipContent-d7ff8b0d.js";import{A as ut}from"./AssetsImage-edf90c9f.js";import{h as pt,j as V,T as I,D as re,C as mt}from"./PnLGraph-bfa90c37.js";import{T as ie}from"./saved-vaults-7a1d42f0.js";import{d as bt}from"./debounce-a79fd1ac.js";import"./PieChart-e44cdf73.js";import"./index-0e0e7991.js";import"./utils-e6a1b5bb.js";function H(t,a){var e,o;if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=De(t);if(!pt(n))throw new RangeError("Invalid time value");var i=String((e=a==null?void 0:a.format)!==null&&e!==void 0?e:"extended"),r=String((o=a==null?void 0:a.representation)!==null&&o!==void 0?o:"complete");if(i!=="extended"&&i!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(r!=="date"&&r!=="time"&&r!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var c="",u=i==="extended"?"-":"",p=i==="extended"?":":"";if(r!=="time"){var d=V(n.getDate(),2),m=V(n.getMonth()+1,2),f=V(n.getFullYear(),4);c="".concat(f).concat(u).concat(m).concat(u).concat(d)}if(r!=="date"){var C=V(n.getHours(),2),g=V(n.getMinutes(),2),N=V(n.getSeconds(),2),y=c===""?"":" ";c="".concat(c).concat(y).concat(C).concat(p).concat(g).concat(p).concat(N)}return c}const ht=t=>({container:{backgroundColor:t.palette.background.alternativeFooterHeader,padding:"24px 0 48px 0",[t.breakpoints.down("sm")]:{padding:"24px 0px"}},title:{...t.typography.h1,marginBottom:"24px"}}),ft=t=>l.createElement("svg",{width:19,height:20,viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M11.1666 8.5C11.1666 9.88071 8.92805 11 6.16663 11C3.4052 11 1.16663 9.88071 1.16663 8.5M11.1666 8.5C11.1666 7.11929 8.92805 6 6.16663 6C3.4052 6 1.16663 7.11929 1.16663 8.5M11.1666 8.5V12.5M1.16663 8.5V12.5M17.1666 3.5C17.1666 2.11929 14.9281 1 12.1666 1C10.1875 1 8.47699 1.57493 7.66663 2.40897M17.1666 3.5C17.1666 4.42535 16.1611 5.23328 14.6666 5.66554M17.1666 3.5V12C17.1666 12.7403 16.1611 13.3866 14.6666 13.7324M17.1666 8C17.1666 8.75669 16.1161 9.41522 14.5666 9.75498M11.1666 12.5C11.1666 13.8807 8.92805 15 6.16663 15C3.4052 15 1.16663 13.8807 1.16663 12.5M11.1666 12.5V16.5C11.1666 17.8807 8.92805 19 6.16663 19C3.4052 19 1.16663 17.8807 1.16663 16.5V12.5",stroke:"#5C70D6",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),gt=x(ht),xt=l.memo(function(){const{t:a}=w(),e=gt(),o=h(Se),n=h(ke),i=l.useMemo(()=>[{title:a("Summary-Deposit"),value:Y(o.deposited),Icon:et},{title:a("Summary-Vaults"),value:`${o.depositedVaults}`,Icon:tt},{title:a("Summary-Yield"),value:Y(n.toNumber()),Icon:ft},{title:a("Summary-Daily"),value:Y(o.daily),Icon:at}],[o.daily,o.deposited,o.depositedVaults,n,a]);return s("div",{className:e.container,children:b(Te,{maxWidth:"lg",children:[s("div",{className:e.title,children:a("Dashboard-Title")}),s(st,{items:i})]})})}),yt=t=>({container:{backgroundColor:t.palette.background.v2.cardBg,padding:"24px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:"24px",borderRadius:"8px"},icon:{width:"120px",height:"120px",[t.breakpoints.up("md")]:{width:"132px",height:"132px"}},textContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:"4px"},title:{...t.typography.h3,color:t.palette.text.primary},text:{...t.typography["body-lg"],color:t.palette.text.secondary}}),Ct="/assets/empty-state-fc732c84.svg",vt=x(yt),wt=l.memo(function(){return h(J)?s(Dt,{}):s(Nt,{})}),ce=l.memo(function({text:a,children:e}){const{t:o}=w(),n=vt();return s(q,{children:b("div",{className:n.container,children:[s("div",{children:s("img",{className:n.icon,src:Ct,alt:"empty"})}),b("div",{className:n.textContainer,children:[s("div",{className:n.title,children:o("Dashboard-NoData")}),s("div",{className:n.text,children:a})]}),e]})})}),Nt=l.memo(function(){const{t:a}=w(),e=Ve(),o=h(J),n=l.useCallback(()=>{e(o?Me():Be())},[e,o]);return s(ce,{text:a("Dashboard-NoConnected"),children:s(Re,{onClick:n,variant:"success",children:a("NoResults-ConnectWallet")})})}),Dt=l.memo(function(){const{t:a}=w();return s(ce,{text:a("Dashboard-NoVaults"),children:s(Pe,{to:"/",variant:"success",children:a("NoResults-ViewAllVaults")})})}),St=t=>({itemsContainer:{display:"flex",flexDirection:"column",rowGap:"8px",width:"100%"},item:{display:"flex",alignItems:"center",justifyContent:"space-between",columnGap:"4px"},square:{width:"12px",height:"12px",borderRadius:"2px"},label:{...t.typography["body-sm-med"],color:"#D0D0DA",textTransform:"uppercase",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"90%"},value:{...t.typography["body-sm"],color:"#999CB3"},flex:{display:"flex",alignItems:"center",columnGap:"8px"}}),kt=x(St),Tt=["#5C70D6","#5C99D6","#5CC2D6","#5CD6AD","#70D65C","#7FB24D"],Vt=l.memo(function({data:a}){const e=kt();return s("div",{className:e.itemsContainer,children:a.map((o,n)=>b("div",{className:e.item,children:[b("div",{className:e.flex,children:[s("div",{style:{backgroundColor:Tt[n%a.length]},className:e.square}),s("div",{className:e.label,children:o.label??o.key})]}),s("div",{className:e.value,children:W(o.percentage)})]},o.key))})}),Mt=t=>({container:{padding:"16px 24px",borderRadius:"8px",backgroundColor:t.palette.background.v2.cardBg,[t.breakpoints.down("md")]:{padding:"16px"},[t.breakpoints.down("sm")]:{padding:"0px"}},infoContainer:{display:"flex",columnGap:"24px",justifyContent:"center",alignItems:"center","& .recharts-surface:focus":{outline:"none"}},title:{...t.typography["body-lg-med"],color:t.palette.text.secondary,marginBottom:"24px"}}),Bt=x(Mt),_=l.memo(function({title:a,data:e,type:o}){const n=Bt();return b("div",{className:n.container,children:[a&&s("div",{className:n.title,children:a}),e&&b("div",{className:n.infoContainer,children:[s(ot,{data:e,type:o}),s(Vt,{data:e})]})]})}),Rt=l.memo(function({title:a}){const e=h(o=>X(o,"chainId"));return s(_,{title:a,type:"chain",data:e})}),de=l.memo(function({title:a}){return h(K)?s(Rt,{title:a}):null}),Pt=l.memo(function({title:a}){const e=h(o=>X(o,"platformId"));return s(_,{title:a,type:"platform",data:e})}),ue=l.memo(function({title:a}){return h(K)?s(Pt,{title:a}):null}),At=t=>({container:{width:"100%",padding:"16px 24px",backgroundColor:t.palette.background.v2.cardBg,borderRadius:"8px",display:"grid",rowGap:"16px",[t.breakpoints.only("md")]:{height:"120px"},[t.breakpoints.down("md")]:{padding:"16px"}},title:{...t.typography["body-lg-med"],color:t.palette.text.primary},bar:{height:"12px",width:"100%",backgroundColor:"#C2D65C",borderRadius:"80px"},stableBar:{height:"100%",width:a=>a.stablesPercentage,borderRadius:a=>a.stablesPercentage==="100%"?"80px":"80px 0px 0px 80px",borderRight:a=>a.stablesPercentage==="100%"?"none":"2px solid #242842",backgroundColor:"#3D5CF5"},legendContainer:{display:"flex",columnGap:"32px"},legendItem:{display:"flex",columnGap:"8px",alignItems:"center"},square:{height:"12px",width:"12px",borderRadius:"2px"},label:{...t.typography["body-sm-med"],color:"#D0D0DA",textTransform:"capitalize","& span":{...t.typography["body-sm"],color:"#999CB3",marginLeft:"4px"}}}),Ut=x(At),Q=l.memo(function(){var i;const{t:a}=w(),e=h(r=>Ae(r)),o=e.filter(r=>r.key==="stable"),n=Ut({stablesPercentage:W((i=o[0])==null?void 0:i.percentage,0,"0%")});return b("div",{className:n.container,children:[s("div",{className:n.title,children:a("Exposure-Stables")}),s("div",{className:n.bar,children:s("div",{className:n.stableBar})}),s("div",{className:n.legendContainer,children:e.map(r=>b("div",{className:n.legendItem,children:[s("div",{className:n.square,style:{backgroundColor:r.color}}),b("div",{className:n.label,children:[r.key," ",s("span",{children:W(r.percentage,2,"0%")})]})]},r.key))})]})}),Et=l.memo(function({title:a}){const e=h(o=>Ue(o));return s(_,{title:a,type:"token",data:e})}),pe=l.memo(function({title:a}){return h(K)?s(Et,{title:a}):null}),$t=t=>({pieChartsContainer:{marginBottom:"24px",display:"grid",gridTemplateColumns:"repeat(3,1fr)",columnGap:"24px",rowGap:"24px",[t.breakpoints.down("md")]:{gridTemplateColumns:"repeat(2,1fr)"},[t.breakpoints.down("sm")]:{gridTemplateColumns:"1fr"}}}),Gt=t=>({container:{width:"100%",backgroundColor:t.palette.background.v2.cardBg,borderRadius:"8px",display:"grid",padding:"16px",[t.breakpoints.only("md")]:{height:"120px"}},option:{...t.typography["body-lg-med"],color:t.palette.text.disabled,whiteSpace:"nowrap","&:hover":{color:t.palette.text.primary,cursor:"pointer"}},active:{color:t.palette.text.primary},optionsContainer:{display:"flex",gap:"12px",marginBottom:"16px",[t.breakpoints.down("sm")]:{marginBottom:"24px"}}}),Lt={[2]:pe,[1]:de,[3]:ue},Ft=x(Gt),Ot=l.memo(function(){const{t:a}=w(),e=Ft(),o=l.useMemo(()=>[{key:"tokenExposure",value:2,text:a("Tokens")},{key:"chainExposure",value:1,text:a("Chains")},{key:"availabilityExposure",value:3,text:a("Exposure-Platform")}],[a]),[n,i]=l.useState(2),r=l.useMemo(()=>Lt[n],[n]);return b("div",{className:e.container,children:[s("div",{className:e.optionsContainer,children:o.map(c=>s("div",{onClick:()=>i(c.value),className:v(e.option,{[e.active]:c.value===n}),children:c.text},c.key))}),s(r,{})]})}),Yt=x($t),It=l.memo(function(){const{t:a}=w(),e=Yt();return b(q,{title:a("Overview"),children:[b("div",{className:e.pieChartsContainer,children:[b($,{smDown:!0,children:[s(de,{title:a("Exposure-Chain")}),s(ue,{title:a("Exposure-Platform")}),s(pe,{title:a("Exposure-Tokens")})]}),s($,{mdUp:!0,children:s(Ot,{})}),s($,{lgUp:!0,children:s(Q,{})})]}),s($,{mdDown:!0,children:s(Q,{})})]})}),Wt=()=>({container:{display:"grid",gridTemplateColumns:"minmax(0, 1fr)",rowGap:"2px",marginTop:"2px","& div:last-child":{"& .lastBorderRadius":{borderRadius:"0px 0px 8px 8px"}}}}),jt=t=>({container:{backgroundColor:t.palette.background.v2.filter,borderRadius:"8px 8px 0px 0px",padding:"16px",display:"grid",width:"100%",columnGap:"8px",backgroundClip:"padding-box",gridTemplateColumns:"minmax(0, 30fr) minmax(0, 70fr)",[t.breakpoints.down("sm")]:{gridTemplateColumns:"minmax(0, 70fr) minmax(0, 30fr)"}},sortColumns:{display:"grid",width:"100%",columnGap:"8px",gridTemplateColumns:"repeat(1, minmax(0, 1fr))",[t.breakpoints.up("md")]:{gridTemplateColumns:"repeat(4, minmax(0, 1fr))"},[t.breakpoints.up("lg")]:{gridTemplateColumns:"repeat(6, minmax(0, 1fr))"}},search:{color:t.palette.text.dark,background:"#07080D",borderRadius:"8px","& .MuiInputBase-input":{padding:"8px 16px",color:t.palette.text.dark,height:"auto","&:focus":{color:"#F5F5FF"},"&::placeholder":{color:"#8A8EA8",opacity:1}}},icon:{background:"transparent",padding:0,border:0,margin:"0 16px 0 0",boxShadow:"none",lineHeight:"inherit",display:"flex",alignItems:"center",color:"#D0D0DA",flexShrink:0,width:"24px",height:"24px","button&":{cursor:"pointer"}},hideSm:{display:"none",[t.breakpoints.up("md")]:{display:"flex"}},hideMd:{display:"none",[t.breakpoints.up("lg")]:{display:"flex"}}}),Z=x(jt),Ht=l.memo(function({sortOptions:a,handleSort:e,handleSearchText:o,searchText:n,handleClearText:i}){const r=Z();return b("div",{className:r.container,children:[s(Kt,{handleSearchText:o,searchText:n,handleClearText:i}),s(qt,{sortOptions:a,handleSort:e})]})}),Kt=l.memo(function({handleSearchText:a,searchText:e,handleClearText:o}){const{t:n}=w(),i=Z(),r=e.length,c=i.icon,u=l.useMemo(()=>r===0?s("div",{className:c,children:s(it,{})}):s("button",{onClick:o,className:c,children:s(ct,{})}),[r,c,o]);return s(dt,{className:i.search,value:e,onChange:a,fullWidth:!0,endAdornment:u,placeholder:n("Filter-Search")})}),zt=[{label:"Dashboard-Filter-AtDeposit",sortKey:"atDeposit",className:"hideSm"},{label:"Dashboard-Filter-Now",sortKey:"now",className:"hideSm"},{label:"Dashboard-Filter-Yield",sortKey:"yield",className:"hideSm"},{label:"Dashboard-Filter-Pnl",sortKey:"pnl"},{label:"Dashboard-Filter-Apy",sortKey:"apy",className:"hideMd"},{label:"Dashboard-Filter-DailyYield",sortKey:"dailyYield",className:"hideMd"}],qt=l.memo(function({sortOptions:a,handleSort:e}){const o=Z(),{sort:n,sortDirection:i}=a;return s("div",{className:o.sortColumns,children:zt.map(({label:r,sortKey:c,className:u})=>s(j,{label:r,sortKey:c,sorted:n===c?i:"none",onChange:e,className:u?o[u]:""},r))})}),_t=t=>({vault:{display:"grid",position:"relative",color:"#9595B2",background:t.palette.background.v2.cardBg,padding:"24px 16px",textDecoration:"none","&:last-child":{borderBottom:0,borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px",backgroundClip:"padding-box"},"&:hover":{cursor:"pointer"}},vaultInner:{display:"grid",gridTemplateColumns:"minmax(0, 30fr) minmax(0, 70fr)",columnGap:"8px",width:"100%",[t.breakpoints.down("sm")]:{gridTemplateColumns:"minmax(0, 80fr) minmax(0, 20fr)"}},network:{border:"none",top:0,left:0,width:"26px",height:"26px"},collapseInner:{display:"flex",flexDirection:"column",rowGap:"16px",backgroundColor:t.palette.background.appBG,padding:"16px 24px",marginTop:"2px",[t.breakpoints.down("md")]:{padding:"16px"}},vaultEarnings:{backgroundColor:"#322460"},vaultPaused:{backgroundColor:"rgba(209, 83, 71, 0.05)"},vaultRetired:{backgroundColor:"#242032"},toggleContainer:{padding:"16px",backgroundColor:t.palette.background.appBG,display:"flex",justifyContent:"center"},activeClassName:{backgroundColor:t.palette.primary.main},buttonText:{...t.typography["body-sm-med"]}}),me=l.memo(M(Zt)(T));function Zt(t,{vaultId:a,className:e,triggerClassName:o}){const n="Dashboard-Filter-DailyYield";if(!Ee(t,a))return{label:n,value:"-",subValue:null,blur:!1,loading:!1,className:e??""};const r=$e(t,a);if(!r)return{label:n,value:"-",subValue:null,blur:!1,loading:!0,className:e??""};if(!Ge(t,a))return{label:n,value:"???",subValue:null,blur:!1,loading:!1,className:e??""};const{dailyTokens:u,dailyUsd:p,oraclePrice:d,tokenDecimals:m}=ee(t,a);return{label:n,value:k(u,m,d,0,2),subValue:S(p),blur:!1,loading:!r,boosted:!1,tooltip:s(E,{title:P(u,m)}),className:e??"",triggerClassName:o??""}}const Qt=l.memo(M(Jt)(T));function Jt(t,{vaultId:a,className:e,pnlData:o}){const n="-",i=B(t,a),r=A(t);if(!i)return{label:n,value:"-",subValue:null,blur:!1,loading:!1,className:e??""};if(!r)return{label:n,value:"-",subValue:null,blur:!1,loading:!0,className:e??""};const{totalPnlUsd:c}=o;return{label:n,value:S(c),subValue:null,blur:!1,loading:!r,boosted:!1,tooltip:null,className:e??""}}const be=l.memo(M(Xt)(T));function Xt(t,{vaultId:a,className:e,pnlData:o}){const n="VaultStat-AtDeposit",i=B(t,a),r=A(t);if(!i)return{label:n,value:"-",subValue:null,blur:!1,loading:!1,className:e??""};if(!r)return{label:n,value:"-",subValue:null,blur:!1,loading:!0,className:e??""};const{balanceAtDeposit:c,usdBalanceAtDeposit:u,oraclePriceAtDeposit:p,tokenDecimals:d}=o;return{label:n,value:k(c,d,p,0,2),subValue:S(u),blur:!1,loading:!r,boosted:!1,tooltip:s(E,{title:P(c,d)}),className:e??""}}const he=l.memo(M(ea)(T));function ea(t,{vaultId:a,className:e,pnlData:o}){const n="VaultStat-Now",i=B(t,a),r=A(t);if(!i)return{label:n,value:"-",subValue:null,blur:!1,loading:!1,className:e??""};if(!r)return{label:n,value:"-",subValue:null,blur:!1,loading:!0,className:e??""};const{deposit:c,depositUsd:u,oraclePrice:p,tokenDecimals:d}=o;return{label:n,value:k(c,d,p,0,2),subValue:S(u),blur:!1,loading:!r,boosted:!1,tooltip:s(E,{title:P(c,d)}),className:e??""}}const ta=t=>({container:{display:"flex",alignItems:"center",columnGap:"4px",...t.typography["body-lg-med"],color:t.palette.text.secondary},tooltipTitle:{...t.typography["subline-sm"],fontWeight:700,color:"#73768C"},rewardsContainer:{display:"flex",flexDirection:"column",rowGap:"4px"},rewardsText:{...t.typography["body-lg-med"],color:"#363C63"},usdPrice:{...t.typography["subline-sm"],fontWeight:700,color:"#73768C"}}),fe=x(ta),ge=l.memo(function({vaultId:a,size:e=20}){const o=fe(),{rewards:n,rewardsTokens:i}=h(r=>F(r,a));return n.length===0?null:s(le,{content:s(aa,{rewards:n}),children:s("div",{className:o.container,children:s(ut,{chainId:a,size:e,assetIds:i})})})}),aa=l.memo(function({rewards:a}){const{t:e}=w(),o=fe();return b("div",{children:[s("div",{className:o.tooltipTitle,children:e("Claimable rewards")}),s("div",{className:o.rewardsContainer,children:a.map(n=>b("div",{children:[b("div",{className:o.rewardsText,children:[Le(n.rewards)," ",n.rewardToken]}),s("div",{className:o.usdPrice,children:S(n.rewardsUsd)})]},n.rewardToken))})]})}),xe=l.memo(M(sa)(T));function sa(t,{vaultId:a}){var r;const e="VaultStat-Claimable Rewards",o=U(t,a),n=t.ui.dataLoader.global.prices.alreadyLoadedOnce&&Fe(t)?(r=t.ui.dataLoader.byChainId[o.chainId])==null?void 0:r.balance.alreadyLoadedOnce:!0;if(!n)return{label:e,value:"-",subValue:null,blur:!1,loading:!0};const{totalRewardsUsd:i}=F(t,a);return{label:e,value:s(ge,{size:20,vaultId:a}),subValue:S(i),blur:!1,loading:!n,boosted:!1,tooltip:null}}const oa=x(oe),na=l.memo(function({vaultId:a,pnlData:e}){const o=oa(),n=h(f=>B(f,a)),i=h(f=>A(f)),{rewards:r}=h(f=>F(f,a)),{totalYield:c,totalYieldUsd:u,oraclePrice:p,tokenDecimals:d}=e,m=l.useMemo(()=>r.length!==0,[r.length]);return!n||!i?s(T,{label:"VaultStat-Yield",showLabel:!1,value:"-",loading:!!i}):s(T,{label:"VaultStat-Yield",value:b("div",{className:o.flexEnd,children:[s(le,{content:s(E,{title:P(c,d)}),triggerClass:v(o.textGreen,o.textOverflow,o.maxWidth80,{[o.maxWidth60]:m}),children:k(c,d,p,0,2)}),m&&b(O,{children:[s("div",{children:"+"}),s(ge,{vaultId:a})]})]}),subValue:S(u),showLabel:!1,loading:!1})}),la=x(oe),ra=l.memo(function({vaultId:a}){const e=la(),o=h(i=>U(i,a)),n=h(i=>te(i,a));return s("div",{className:e.vaultStats,children:b("div",{className:v(e.rowDashboard),children:[s("div",{className:v(e.column,e.hideSm),children:s(be,{contentClassName:e.contentContainer,pnlData:n,triggerClassName:v(e.textOverflow,e.maxWidth80),showLabel:!1,vaultId:a})}),s("div",{className:v(e.column,e.hideSm),children:s(he,{contentClassName:e.contentContainer,pnlData:n,triggerClassName:v(e.textOverflow,e.maxWidth80),showLabel:!1,vaultId:a})}),s("div",{className:v(e.column,e.hideSm),children:ae(o)?s(xe,{showLabel:!1,vaultId:a}):s(na,{pnlData:n,vaultId:a})}),s("div",{className:e.column,children:s(Qt,{pnlData:n,showLabel:!1,vaultId:a})}),s("div",{className:v(e.column,e.hideMd),children:s(ne,{showLabel:!1,vaultId:a})}),s("div",{className:v(e.column,e.hideMd),children:s(me,{className:e.textOverflow,showLabel:!1,vaultId:a})})]})})}),ia=t=>({stat:{...t.typography["body-lg-med"],color:t.palette.text.secondary,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"80%"},column:{display:"flex",alignItems:"center",justifyContent:"flex-end"},textFlexStart:{textAlign:"left"},gridMobile:{display:"grid",gridTemplateColumns:"repeat(2,minmax(0, 50fr))",columnGap:"8px"},statMobile:{...t.typography["body-sm"],color:t.palette.text.secondary},textRed:{color:"#D15347"},textGreen:{color:t.palette.primary.main},textDark:{color:t.palette.text.dark},textOverflow:{flexDirection:"row-reverse",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flexShrink:1}}),ye=x(t=>({rowContainer:{display:"grid",backgroundColor:t.palette.background.v2.cardBg,padding:"16px",gridTemplateColumns:"minmax(0, 30fr) minmax(0, 70fr)",columnGap:"16px",[t.breakpoints.down("sm")]:{gridTemplateColumns:"repeat(2,minmax(0, 50fr))"}},rowMobileContainer:{padding:"16px",backgroundColor:t.palette.background.appBG}})),Ce=l.memo(function({children:a,className:e}){const o=ye();return s("div",{className:v(o.rowContainer,e),children:a})}),ve=l.memo(function({children:a,className:e}){const o=ye();return s("div",{className:v(o.rowMobileContainer,e),children:a})}),ca=x(t=>({infoGrid:{display:"grid",gridTemplateColumns:"repeat(4,minmax(0, 1fr))",columnGap:"16px",[t.breakpoints.down("sm")]:{gridTemplateColumns:"minmax(0, 1fr)",rowGap:"4px"}}})),L=l.memo(function({children:a}){const e=ca();return s("div",{className:e.infoGrid,children:a})}),da=t=>({mobileStat:{display:"flex",alignItems:"center",columnGap:"8px",...t.typography["body-sm"],color:t.palette.text.disabled,"& div":{},[t.breakpoints.down("md")]:{justifyContent:"space-between"}},value:{color:t.palette.text.secondary}}),ua=x(da),R=l.memo(function({label:a,value:e,valueClassName:o}){const n=ua();return b("div",{className:n.mobileStat,children:[s("div",{children:a})," ",s("span",{className:v(n.value,o),children:e})]})}),we=x(ia),pa=l.memo(function({data:a,tokenDecimals:e}){const o=we(),{internal:n,datetime:i,shareBalance:r,usdBalance:c,underlyingDiff:u,shareToUnderlyingPrice:p,underlyingToUsdPrice:d}=a,m=l.useMemo(()=>u.gt(G)?o.textGreen:o.textRed,[o.textGreen,o.textRed,u]);return n?null:b(Ce,{children:[s("div",{className:v(o.stat,o.textFlexStart),children:H(i)}),b(L,{children:[s("div",{className:o.column,children:s(I,{className:v(m,o.stat),amount:u,decimals:e,price:d})}),s("div",{className:o.column,children:s(I,{amount:r.times(p),decimals:e,price:d,className:o.stat})}),s("div",{className:o.column,children:s(I,{amount:r,decimals:18,price:p,className:o.stat})}),s("div",{className:o.column,children:s("div",{className:o.stat,children:S(c)})})]})]})}),ma=l.memo(function({data:a,tokenDecimals:e}){const o=we(),{t:n}=w(),{internal:i,datetime:r,shareBalance:c,usdBalance:u,underlyingDiff:p,shareToUnderlyingPrice:d,underlyingToUsdPrice:m,underlyingBalance:f}=a,C=l.useMemo(()=>p.gt(G)?o.textGreen:o.textRed,[o.textGreen,o.textRed,p]),g=l.useMemo(()=>k(f,e,m,0,2),[f,e,m]),N=l.useMemo(()=>k(c,18,d,0,2),[c,d]),y=l.useMemo(()=>k(p,e,m,0,2),[p,e,m]);return i?null:b(ve,{className:o.gridMobile,children:[b(L,{children:[s("div",{className:v(C,o.statMobile),children:`${p.gt(G)?" +":""} ${y}`}),s("div",{className:o.statMobile,children:H(r,{representation:"date"})}),s("div",{className:v(o.statMobile,o.textDark),children:H(r,{representation:"time"})})]}),b(L,{children:[s(R,{valueClassName:o.textOverflow,label:n("Dashboard-Filter-Balance"),value:g}),s(R,{valueClassName:o.textOverflow,label:n("Dashboard-Filter-MooTokens"),value:N}),s(R,{label:n("Dashboard-Filter-UsdBalance"),value:S(u)})]})]})}),ba=[{label:"Dashboard-Filter-Amount",sortKey:"amount"},{label:"Dashboard-Filter-Balance",sortKey:"balance"},{label:"Dashboard-Filter-MooTokens",sortKey:"mooTokenBal"},{label:"Dashboard-Filter-UsdBalance",sortKey:"usdBalance"}],ha=x(t=>({filter:{borderRadius:"8px 8px 0px 0px",[t.breakpoints.down("sm")]:{display:"none"}},justifyStart:{justifyContent:"start"}})),fa=l.memo(function({handleSort:a,sortOptions:e}){const o=ha(),{sort:n,sortDirection:i}=e;return b(Ce,{className:o.filter,children:[s(j,{label:"Dashboard-Filter-Date",sortKey:"datetime",sorted:n==="datetime"?i:"none",onChange:a,className:o.justifyStart}),s(L,{children:ba.map(({label:r,sortKey:c})=>s(j,{label:r,sortKey:c,sorted:n===c?i:"none",onChange:a},r))})]})});function ga(t){const a=h(p=>U(p,t)),e=h(p=>Oe(p,a.chainId,a.depositTokenAddress)),o=h(p=>B(p,t)),n=l.useMemo(()=>{const p=Ye(new Date,1);return o.map(d=>{if(!d.underlyingToUsdPrice){const m=d.underlyingToUsdPrice??(Ie(d.datetime,p)?G:e);return{...d,underlyingToUsdPrice:m,usdBalance:d.underlyingBalance.times(m),usdDiff:d.underlyingDiff.times(m)}}return d})},[o,e]),[i,r]=l.useState({sortDirection:"none",sort:"default"}),c=l.useMemo(()=>{const p=i.sortDirection==="desc"?-1:1;let d=o;return i.sort==="datetime"&&(d=D(o,m=>m.datetime.getTime()*p)),i.sort==="amount"&&(d=D(o,m=>m.shareDiff.toNumber()*p)),i.sort==="balance"&&(d=D(o,m=>m.shareBalance.times(m.shareToUnderlyingPrice).toNumber()*p)),i.sort==="mooTokenBal"&&(d=D(o,m=>m.shareBalance.toNumber()*p)),i.sort==="usdBalance"&&(d=D(o,m=>{var f;return((f=m.usdBalance)==null?void 0:f.toNumber())*p})),d},[i.sort,i.sortDirection,n]),u=l.useCallback(p=>{p===i.sort?r({...i,sortDirection:i.sortDirection==="asc"?"desc":"asc"}):r({sort:p,sortDirection:"desc"})},[i]);return{sortedTimeline:c,sortedOptions:i,handleSort:u}}const xa=x(()=>({transactionsGrid:{display:"grid",gridTemplateColumns:"minmax(0, 1fr)",rowGap:"2px"}})),Ne=l.memo(function({vaultId:a}){const e=xa(),o=h(d=>U(d,a)),n=h(d=>We(d,o.chainId,o.depositTokenAddress)),{sortedTimeline:i,sortedOptions:r,handleSort:c}=ga(a),u=z(d=>d.breakpoints.down("sm"),{noSsr:!0}),p=l.useMemo(()=>u?ma:pa,[u]);return b("div",{className:e.transactionsGrid,children:[s(fa,{sortOptions:r,handleSort:c}),i.map(d=>s(p,{tokenDecimals:n.decimals,data:d},d.datetime.getTime()))]})}),ya=t=>({container:{display:"none",[t.breakpoints.only("md")]:{display:"flex",alignItems:"center",justifyContent:"flex-end",columnGap:"32px"}},boostText:{color:"#DB8332"}}),Ca=x(ya),va=l.memo(function({vaultId:a}){const e=Ca(),{t:o}=w(),{dailyUsd:n}=h(u=>ee(u,a)),i=h(u=>je(u,a)),r=l.useMemo(()=>He(i,"???"),[i]),c=h(u=>Ke(u,a));return b("div",{className:e.container,children:[s(R,{label:o("APY"),value:c?r.boostedTotalApy:r.totalApy,valueClassName:c?e.boostText:""}),s(R,{label:o("Dashboard-Filter-DailyYield"),value:S(n)})]})}),wa=t=>({container:{display:"flex",flexDirection:"column",rowGap:"2px",marginTop:"2px"},toggleContainer:{padding:"16px",backgroundColor:t.palette.background.appBG,display:"flex",justifyContent:"center"},activeClassName:{backgroundColor:t.palette.primary.main},buttonText:{...t.typography["body-sm-med"]}}),Na=t=>({inner:{display:"flex",flexDirection:"column",rowGap:"12px"},statMobile:{display:"flex",justifyContent:"space-between"},value:{...t.typography["body-sm"],color:t.palette.text.middle},valueBoosted:{color:"#DB8332"},valueContainer:{display:"flex",columnGap:"8px",alignItems:"center"},label:{...t.typography["body-sm"],color:t.palette.text.dark}}),Da=l.memo(M(Sa)(T));function Sa(t,{vaultId:a,className:e,pnlData:o}){const n="VaultStat-Yield",i=B(t,a),r=A(t);if(!i)return{label:n,value:"-",subValue:null,blur:!1,loading:!1,className:e??""};if(!r)return{label:n,value:"-",subValue:null,blur:!1,loading:!0,className:e??""};const{totalYield:c,totalYieldUsd:u,oraclePrice:p,tokenDecimals:d}=o;return{label:n,value:k(c,d,p,0,2),tooltip:s(E,{title:P(c,d)}),subValue:S(u),blur:!1,loading:!r,boosted:!1,className:e??""}}const ka=x(Na),Ta=l.memo(function({vaultId:a}){const e=ka(),o=h(c=>U(c,a)),n=h(c=>ze(c,a)),i=h(c=>te(c,a)),{rewards:r}=h(c=>F(c,a));return s(ve,{children:b("div",{className:e.inner,children:[s(be,{pnlData:i,className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:e.value,labelClassName:e.label,vaultId:a}),s(he,{pnlData:i,className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:e.value,labelClassName:e.label,vaultId:a}),r.length!==0&&s(xe,{className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:e.value,labelClassName:e.label,vaultId:a}),!ae(o)&&s(Da,{pnlData:i,className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:e.value,labelClassName:e.label,vaultId:a}),s(ne,{className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:v(e.value,{[e.valueBoosted]:n}),labelClassName:e.label,vaultId:a}),s(me,{className:e.statMobile,contentClassName:e.valueContainer,triggerClassName:e.value,labelClassName:e.label,vaultId:a})]})})}),Va=x(wa),Ma=l.memo(function({vaultId:a}){const e=Va(),[o,n]=l.useState("stats"),{t:i}=w(),r=h(p=>se(p,a)),c=l.useMemo(()=>{const p={stats:i("Dashboard-VaultData"),txHistory:i("Dashboard-TransactionHistory")};return r&&(p.chart=i("Dashboard-Chart")),p},[i]),u=l.useCallback(p=>{n(p)},[]);return b("div",{className:e.container,children:[s("div",{className:e.toggleContainer,children:s(ie,{selectedClass:e.activeClassName,buttonClass:e.buttonText,value:o,onChange:u,options:c})}),o==="stats"&&s(Ta,{vaultId:a}),o==="txHistory"&&s(Ne,{vaultId:a}),o==="chart"&&s(re,{vaultId:a})]})}),Ba=x(_t),Ra=l.memo(function({vaultId:a}){const e=Ba(),[o,n]=l.useState(!1),i=h(y=>qe(y,a)),r=h(y=>_e(y,a)),c=h(y=>Ze(y,a)),u=h(y=>se(y,a)),p=l.useCallback(()=>{n(!o)},[o]),d=z(y=>y.breakpoints.down("sm"),{noSsr:!0}),{t:m}=w(),[f,C]=l.useState("txHistory"),g=l.useMemo(()=>({txHistory:m("Dashboard-TransactionHistory"),chart:m("Dashboard-Chart")}),[m]),N=l.useCallback(y=>{C(y)},[]);return b("div",{children:[s("div",{onClick:p,className:v({[e.vault]:!0,[e.vaultEarnings]:c,[e.vaultPaused]:r,[e.vaultRetired]:i,lastBorderRadius:!0}),children:b("div",{className:e.vaultInner,children:[s(nt,{isLink:!0,networkClassName:e.network,vaultId:a}),s(ra,{vaultId:a})]})}),s(mt,{in:o,timeout:"auto",children:d?s(Ma,{vaultId:a}):b(O,{children:[u&&s("div",{className:e.toggleContainer,children:s(ie,{selectedClass:e.activeClassName,value:f,onChange:N,options:g})}),b("div",{className:e.collapseInner,children:[s(va,{vaultId:a}),f==="txHistory"&&s(Ne,{vaultId:a}),f==="chart"&&s(re,{vaultId:a})]})]})})]})});function Pa(){const[t,a]=l.useState(""),[e,o]=l.useState({sortDirection:"desc",sort:"now"}),n=l.useCallback(m=>a(m.target.value),[]),i=l.useCallback(()=>{a("")},[]),r=h(m=>lt(m,t)),c=h(m=>m.biz.apy.totalApy.byVaultId),u=h(Qe),p=l.useMemo(()=>{const m=e.sortDirection==="desc"?-1:1;let f=r;return e.sort==="atDeposit"&&(f=D(r,C=>u[C.id].usdBalanceAtDeposit.toNumber()*m)),e.sort==="now"&&(f=D(r,C=>u[C.id].depositUsd.toNumber()*m)),e.sort==="yield"&&(f=D(r,C=>u[C.id].totalYieldUsd.toNumber()*m)),e.sort==="pnl"&&(f=D(r,C=>u[C.id].totalPnlUsd.toNumber()*m)),e.sort==="apy"&&(f=D(r,C=>{const g=c[C.id];if(!g)return-1;if(g.boostedTotalApy!==void 0)return m*g.boostedTotalApy;if(g.totalApy!==void 0)return m*g.totalApy;if(g.vaultApr!==void 0)return m*g.vaultApr;throw new Error("Apy type not supported")})),e.sort==="dailyYield"&&(f=D(r,C=>{const g=c[C.id];if(!g)return-1;const{deposit:N,oraclePrice:y}=u[C.id];return m*N.times(y).times(g.totalDaily).toNumber()})),f},[e.sortDirection,e.sort,r,u,c]),d=l.useCallback(m=>{m===e.sort?o({...e,sortDirection:e.sortDirection==="asc"?"desc":"asc"}):o({sort:m,sortDirection:"desc"})},[e]);return{sortedFilteredVaults:p,sortedOptions:e,handleSort:d,handleSearchText:n,searchText:t,handleClearText:i}}const Aa=x(t=>({container:{display:"flex",flexDirection:"column",rowGap:"4px",padding:"24px",background:t.palette.background.v2.cardBg,borderRadius:"0px 0px 8px 8px",marginTop:"2px"},title:{...t.typography.h3,color:"#D0D0DA"},text:{...t.typography["body-lg"],color:"#D0D0DA"}})),Ua=l.memo(function(){const a=Aa(),{t:e}=w();return b("div",{className:a.container,children:[s("div",{className:a.title,children:e("NoResults-NoResultsFound")}),s("div",{className:a.text,children:e("NoResults-TryClearSearch")})]})}),Ea=Je(Wt),$a=l.memo(function(){const{t:a}=w(),{sortedFilteredVaults:e,sortedOptions:o,handleSort:n,handleSearchText:i,searchText:r,handleClearText:c}=Pa(),u=z(d=>d.breakpoints.down("sm"),{noSsr:!0}),p=l.useMemo(()=>u?"Dashboard-Your-Vaults-Subtitle-Mobile":"Dashboard-Your-Vaults-Subtitle",[u]);return b(q,{title:a("Dashboard-Your-Vaults-Title"),subTitle:a(p),children:[s(Ht,{sortOptions:o,handleSort:n,handleSearchText:i,searchText:r,handleClearText:c}),e.length===0?s(Ua,{}):null,s(Ga,{vaults:e})]})}),Ga=l.memo(function({vaults:a}){const e=Ea(),o=a.length,n=3,[i,r]=l.useState(n),c=l.useRef(),u=l.useRef(),p=l.useMemo(()=>a.slice(0,i),[a,i]),d=l.useMemo(()=>Math.max(0,o-i),[o,i]),m=l.useCallback(g=>{if(g&&d>0){const N=n+Math.ceil((window.scrollY-u.current.offsetTop+window.innerHeight)/75);r(y=>y+Math.max(0,Math.min(N,o-y)))}},[o,r,n,d]),f=l.useMemo(()=>bt(()=>{if(u.current&&d>0&&window.scrollY+window.innerHeight>u.current.offsetTop){const g=n+Math.ceil((window.scrollY-u.current.offsetTop+window.innerHeight)/75);r(N=>N+Math.max(0,Math.min(g,o-N)))}},100),[o,r,n,d]),[C]=rt({onChange:m,rootMargin:`0px 0px ${75*2}px 0px`});return l.useEffect(()=>{i>o?r(o):i<n&&r(Math.min(n,o))},[i,o]),l.useEffect(()=>(window.addEventListener("scroll",f),window.addEventListener("resize",f),()=>{window.removeEventListener("scroll",f),window.removeEventListener("resize",f)}),[f]),b(O,{children:[s("div",{className:e.container,ref:c,children:p.map(g=>s(Ra,{vaultId:g.id},g.id))}),s("div",{ref:u}),s("div",{ref:C})]})}),La=()=>({dashboard:{flex:"1 1 auto",backgroundColor:"#121420",paddingBottom:"48px"}}),Fa=x(La),Ja=l.memo(function(){const a=Fa(),e=h(Xe);return b("div",{className:a.dashboard,children:[s(xt,{}),e.length>0?b(O,{children:[s(It,{}),s($a,{})]}):s(wt,{})]})});export{Ja as default};
